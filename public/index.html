<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>SHIKITANI WORLD</title>
    <meta name="description" content="SHIKITANI WORLDへようこそ。こちらでは視力検査やタッチゲームを始め、やることリスト、テトリスができます。趣味は写真や自転車、パルクール、プログラミング歴は1年半。旅行先は愛知県が多いです。お問合せはインスタグラムへどうぞ。" />
    <link rel="icon" href="nezcon.ico" />
    <link rel="stylesheet" href="src/css/styles.css" />
    <!-- CSS版 font-awesome CDN -->
    <link
      href="https://use.fontawesome.com/releases/v5.6.1/css/all.css"
      rel="stylesheet"
    />
    <!-- font-awesome-animation -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome-animation/0.0.10/font-awesome-animation.css"
      rel="stylesheet"
      type="text/css"
      media="all"
    />
    <link href='https://fonts.googleapis.com/css?family=Varela' rel='stylesheet' type='text/css'>
    <!-- ハートマーク -->
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    />
  </head>

  <body>
    <!-- header_scroll 監視 ------------------------ -->
    <div id="target_iob"></div>
    <header>
      <h1 id="shiki" class="to_top">しきたにワールド</h1>
      <nav>
        <p class="only_phone"><i class="far fa-caret-square-down"></i></p>
        <ul class="index_iob">
          <li><a class="nav_query" id="nav1" href="#about">自己紹介</a></li>
          <li><a class="nav_query" id="nav2" href="#work">作品</a></li>
          <li><a class="nav_query" id="nav3" href="#town">地域</a></li>
          <li><a class="nav_query" id="nav4" href="#contact">お問い合わせ</a></li>
          <!-- 翻訳.js -->
          <li>
            <a id="j_btn" class="hidden">日本語</a>
            <a id="e_btn">英語</a>
          </li>
        </ul>
      </nav>
    </header>

    <main>
      <!-- FirstView --------------------------- -->
      <div class="first_view">
        <h1 id="hello_world">Hello World</h1>
      </div>

      <!-- 自己紹介 --------------------------- -->
      <section class="about" id="about">
        <h1 id="h1_about" data-h1="-">自己紹介</h1>
        <p id="dsc1">自己紹介します。</p>
        <div class="frontback">
          <div class="front">
            <div id="face">
              <!-- 顔 -->
            </div>
            <h2 id="profile">プロフィール</h2>
            <p>しきたに / 1991年 / <span id="open">年表</span></p>
            <div id="mask" class="hidden"></div>
            <div id="modal" class="top_hidden">
              <p>経歴</p>
              <table
                border="1"
                width="320"
                cellpadding="6"
                bordercolor="#333333"
              >
                <thead>
                  <tr bgcolor="ffe0b6">
                    <th>年</th>
                    <th colspan="2">できごと</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>1991</td>
                    <td colspan="2">Osaka</td>
                  </tr>
                  <tr>
                    <td>2006</td>
                    <td>高校</td>
                    <td>将棋</td>
                  </tr>
                  <tr>
                    <td>2012</td>
                    <td>研究</td>
                    <td>橋脚</td>
                  </tr>
                  <tr>
                    <td>2017</td>
                    <td>哲学</td>
                    <td>パルクール</td>
                  </tr>
                  <tr>
                    <td>2018</td>
                    <td>写真</td>
                    <td>カメラ</td>
                  </tr>
                  <tr>
                    <td>2020</td>
                    <td>勉強</td>
                    <td><font color="#ed1c24">プログラミング</font>〜</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <h2 id="hobby">
              趣味
              <!-- いいねボタン -->
              <label class="like">
                <input type="checkbox" />
                <i class="material-icons heart">favorite</i>
                <div class="ripple"></div>
              </label>
            </h2>
            <p>自転車</p>
          </div>
          <!-- スキル一覧 -->
          <div class="back">
            <h2 class="skill" id="skill">スキル</h2>
            <!-- グラフ -->
            <div class="chart" id="jschart" title="JavaScriptを学習中です">
              <!-- 幅は比率。→divで囲った。 -->
              <canvas id="my_chart" width="1" height="1">
                Canvas not supported...
              </canvas>
            </div>
          </div>
        </div>
      </section>

      <!-- コンテンツ --------------------------- -->
      <section class="feature" id="work">
        <h1 id="h1_work" data-h1="-">コンテンツ</h1>
        <!-- 画像を監視.js --------------------------- -->
        <p id="dsc2">コンテンツをクリックして下さい</p>
        <div class="works">
          <!-- 1 -->
          <div class="work">
            <div class="desc">
              <h2>
                <a id="logic" href="src/diagnose/diagnose.html" target="_blank"
                  >脳トレ診断</a
                >
              </h2>
              <p>
                脳トレゲームページを作成しました。<br />運試しや視力検査、数字タッチ、神経衰弱などのタイムアタックがあります。<br />ぜひ遊んでください！
              </p>
            </div>
            <div class="pic img_iob from_left">
              <a href="src/diagnose/diagnose.html" target="_blank">
                <img src="src/img/feat1.jpg" alt="しきたにワールドの中の脳トレ診断ページです。運試しや視力検査、数字タッチ、神経衰弱などのタイムアタックゲームがあります。" />
              </a>
            </div>
          </div>
          <!-- 2 -->
          <div class="work">
            <div class="desc">
              <h2>
                <a id="todo" href="src/todo/todo.html" target="_blank"
                  >やることリスト</a
                >
              </h2>
              <p>
                お手軽に管理できるTodoリストを作りました。リストの追加・削除、ストックや保存が出来ます。
              </p>
            </div>
            <div class="pic img_iob from_right">
              <a href="src/todo/todo.html" target="_blank">
                <img src="src/img/feat2.jpg" alt="お手軽に管理できるTodoリストです。リストの追加・削除、ストックや保存が出来ます。" />
              </a>
            </div>
          </div>
          <!-- 3 -->
          <div class="work">
            <div class="desc">
              <h2>
                <a id="tet" href="src/tetris/tetris.html" target="_blank"
                  >テトリス PC専用</a
                >
              </h2>
              <p>
                テトリスです。上からブロックが落ちてくるので埋もれないようにうまく捌いていきましょう。※矢印キーが効かないためPC専用になります。
              </p>
            </div>
            <div class="pic img_iob from_left">
              <a href="src/tetris/tetris.html" target="_blank">
                <img src="src/img/feat3.jpg" alt="PC専用ゲーム「テトリス」です" />
              </a>
            </div>
          </div>
          <!-- 4 -->
          <div class="work">
            <div class="desc">
              <h2>
                <a
                  id="back_world"
                  href="https://spapf-24842.web.app/"
                  target="_blank"
                  >裏ワールド</a
                >
              </h2>
              <p>別ページです。</p>
            </div>
            <div class="pic img_iob from_right">
              <a href="https://spapf-24842.web.app/" target="_blank">
                <img src="src/img/feat4.jpg" alt="裏しきたにワールドのHome画面です。Reactで作成したのでページ遷移がさすが早い。" />
              </a>
            </div>
          </div>
        </div>
      </section>

      <!-- 地域 --------------------------- -->
      <section class="town" id="town">
        <h1 id="h1_town" data-h1="-">地域</h1>
        <p id="dsc3">私の記憶の中の地域</p>
        <div class="town_box">
          <!-- 画像 + << >> -->
          <div class="container">
            <ul class="pic">
              <li><img src="src/img/aich1.JPG" alt="愛知県一宮市丹陽町の夕方の素敵な田んぼたち"/></li>
              <li><img src="src/img/aich2.JPG" alt="愛知県岩倉市の五条川と満開の桜。春のさくら名所100選の1つ。"/></li>
              <li><img src="src/img/aich3.JPG" alt="愛知県江南市曽本町の風景と、本曽寺のポツンとある少し膨らんだ木"/></li>
              <li><img src="src/img/aich4.JPG" alt="愛知県小牧市中央の夕方のシンボルロード。奥に見えるのは小牧山城です。"/></li>
            </ul>
            <button id="prev">&laquo;</button>
            <button id="next">&raquo;</button>
          </div>
          <!-- 説明文 -->
          <ul class="desc">
            <li>
              <h2>一宮市</h2>
              <p>一宮市丹陽町です。<br />この先を進むと、田んぼがあります。</p>
            </li>
            <li>
              <h2>岩倉市</h2>
              <p>
                岩倉市五条川です。<br />春のさくら名所100選に選ばれています。犬山市に上流があります。
              </p>
            </li>
            <li>
              <h2>江南市</h2>
              <p>
                江南市の田んぼの風景です。<br />夏の夕方6:00ごろの空がとても美しいです。
              </p>
            </li>
            <li>
              <h2>小牧市</h2>
              <p>
                小牧市中央のシンボルロードです。<br />小牧山城が見えます。この先にあるたこ焼き屋さんがおすすめです。
              </p>
            </li>
          </ul>
        </div>
        <!-- 丸ボタン -->
        <nav></nav>
      </section>

      <!-- お問い合わせ --------------------------- -->
      <section class="contact" id="contact">
        <h1 id="h1_contact" data-h1="-">お問い合わせ</h1>
        <p class="free" id="dsc4">
          <span class="faa-parent animated-hover">
            <i class="fas fa-envelope fa-lg faa-ring"></i>
          </span>
          お気軽にご連絡ください。
        </p>
        <!-- React.js-->
        <div id="root0"></div>
      </section>
    </main>

    <footer>
      <ul>
        <li>
          <a
            href="https://github.com/naniwanoshikin/myfirst_hello"
            target="_blank"
            rel="noreferrer noopener"
          >
            <span class="faa-parent animated-hover">
              <i class="fab fa-github fa-2x faa-tada"></i>
            </span>
          </a>
        </li>
        <!-- qiita -->
        <li>
          <a
            href="https://qiita.com/power_of_shikin/items/cbe1aed7ba4a9594f963"
            target="_blank"
            rel="noreferrer noopener"
          >
            <span class="faa-parent animated-hover faa-tada fa-stack search">
              <!-- 下: ■ -->
              <i class="fa fa-square fa-stack-2x"></i>
              <!-- 上: ◯ -->
              <i class="fa fa-search fa-stack-1x fa-inverse fa-2x"></i>
            </span>
          </a>
        </li>
        <li>
          <a
            href="https://twitter.com/power_of_shikin"
            target="_blank"
            rel="noreferrer noopener"
          >
            <span class="faa-parent animated-hover">
              <i class="fab fa-twitter fa-2x faa-passing"></i>
            </span>
          </a>
        </li>
        <li>
          <a
            href="http://instagram.com/shikitti_web"
            target="_blank"
            rel="noreferrer noopener"
          >
            <span class="faa-parent animated-hover">
              <i class="fab fa-instagram fa-2x fa-flip-horizontal faa-spin"></i>
            </span>
          </a>
        </li>
        <!-- Youtube -->
        <!-- <li>
        <a href="https://www.youtube.com/channel/UCyydUwy-0x2Tc-FcCWBQncw?view_as=subscriber" target="_blank"
          rel="noreferrer noopener">
          <span class="faa-parent animated-hover">
            <i class="fab fa-youtube fa-2x faa-ring"></i>
          </span>
        </a>
      </li> -->
      </ul>
      <div>
        <p class="to_top">© shikitani_world 2022</p>
      </div>
    </footer>

    <!-- ヘッダーに戻る -->
    <script src="src/js/back_to_up.js"></script>
    <!-- jQuery nav -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <!-- ナビ jQuery -->
    <script src="src/js/nav_scroll_down.js"></script>
    <!-- 交差監視: ヘッダー, ナビ色 -->
    <script src="src/js/iob_nav.js"></script>
    <!-- 交差監視: 画像 -->
    <script src="src/js/iob_img.js"></script>

    <!-- スクロール Reveal -->
    <script src="https://unpkg.com/scrollreveal"></script>
    <script src="src/js/scroll_reveal.js"></script>
    <!-- 英訳, 日本語訳 -->
    <script src="src/js/trans_btn.js"></script>

    <!-- 自己紹介 プロフィール -->
    <script src="src/js/about_profile.js"></script>
    <!-- 自己紹介 chart.js CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.js"></script>
    <script src="src/js/about_skill_chart.js"></script>

    <!-- 地域 カルーセル -->
    <script src="src/js/remain_town_slide.js"></script>

    <!-- React CDN -->
    <script
      src="https://unpkg.com/react@16/umd/react.development.js"
      crossorigin
    ></script>
    <script
      src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"
      crossorigin
    ></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>

    <!-- お問い合わせ -->
    <script type="text/babel">
      (() => {
        // スペース削除
        // (@param, @return) = (string, 前後スペースなしstring)
        function spa(string) {
          return string.replace(/^[ |　]+|[ |　]+$/g, "");
        }
        // a@g.com形式であればtrue
        // (@param, @return) = (string, bool)
        function ad(string) {
          const reg =
            /^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}\.[A-Za-z0-9]{1,}$/;
          return reg.test(string);
        }

        // お問い合わせフォーム
        class ContactForm extends React.Component {
          constructor(props) {
            // なぜpropsが入るのか？
            super(props); // superとは、React.Componentのこと。初期化処理をここで行う。
            this.state = {
              name: "", // 入力値（まだ入力不可）
              age: "", // checkbox
              radio: "", // ラジオボタンの値
              content: "", // 内容
              hasNameError: false,
              hasContentError: false,
              hasAgeError: false,
              hasRadioError: false,
              isSubmitted: false, // 確認画面状態
            };
          }
          handleName(e) {
            // 名前を入力した時、
            const inputValue = e.target.value;
            this.setState({
              name: inputValue, // string
              hasNameError: inputValue === "", // bool（未入力だとtrue）
            });
          }
          handleContent(e) {
            // 内容を入力した時、
            this.setState({
              content: e.target.value,
              hasContentError: e.target.value === "",
            });
          }
          handleAge(e) {
            // 年齢を選択した時、
            this.setState({
              age: e.target.value,
              hasAgeError: e.target.value === "",
            });
          }
          handleRadio(e) {
            // ラジオボタンを選択した時、
            this.setState({
              radio: e.input,
              hasRadioError: e.input === "",
            });
          }
          handleConfirm(e) {
            // 確認ボタン押した時、
            e.preventDefault();
            if (!this.state.name) {
              // 未入力ならエラーメッセージを表示
              this.setState({ hasNameError: true });
            }
            if (!this.state.content) {
              this.setState({ hasContentError: true });
            }
            if (!this.state.age) {
              this.setState({ hasAgeError: true, age: "未回答" });
            }
            if (!this.state.radio) {
              console.log("not radio value");
              this.setState({ hasRadioError: true, radio: "未回答" });
            }
            if (!this.state.name || !this.state.content) {
              return;
            }
            this.setState({ isSubmitted: true });
          }
          handleFix(e) {
            // 修正ボタン押した時、
            e.preventDefault();
            this.setState({ isSubmitted: false });
          }
          handleSubmit(e) {
            // 送信ボタン押した時、
            e.preventDefault();
            const name = spa(this.state.name);
            const content = spa(this.state.content);
            const age = this.state.age;
            const radio = this.state.radio;
            const WEBHOOK_url =
              "https://hooks.slack.com/services/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";
            const payload = {
              text:
                "★New Message★\n" +
                "お名前: " +
                name +
                "\n" +
                "年齢: " +
                age +
                "\n" +
                "方法: " +
                radio +
                "\n" +
                "【問い合わせ内容】\n" +
                content,
            };
            // フォーム内容をSlackのIncoming Webhook URL に送信
            fetch(WEBHOOK_url, {
              method: "POST",
              body: JSON.stringify(payload),
            }).then(() => {
              alert("送信が完了しました。追ってご連絡いたします🙌");
              this.setState({
                name: "",
                age: "",
                radio: "",
                content: "",
                isSubmitted: false,
              });
            });
            console.log("sent for slack!");
          }
          render() {
            // エラーメッセージ
            let NameError; // 名前
            let AgeError; // 年齢の選択
            let RadioError; // 連絡方法の選択
            let ContentError; // お問い合せ内容
            if (this.state.hasNameError) {
              NameError = (
                <p className="error-message">※お名前を入力してください</p>
              );
            }
            if (this.state.hasAgeError) {
              AgeError = (
                <p className="error-message">※年齢を選択してください</p>
              );
            }
            if (this.state.hasRadioError) {
              RadioError = (
                <p className="error-message">※直近の状況を選択してください</p>
              );
            }
            if (this.state.hasContentError) {
              ContentError = (
                <p className="error-message">※希望事項を入力してください</p>
              );
            }
            const confirmform = [
              // 確認画面リスト（順番どおり）
              { input: "お名前", output: [spa(this.state.name)] },
              { input: "年齢", output: [this.state.age] },
              { input: "職業", output: [this.state.radio] },
              { input: "内容", output: [spa(this.state.content)] },
            ];
            const ageitems = [
              // checkbox
              { input: "-", output: "回答しない" },
              { input: "16-25歳", output: "16~25歳" },
              { input: "26-35歳", output: "26~35歳" },
              { input: "36-45歳", output: "36~45歳" },
              { input: "46-歳", output: "46~歳" },
            ];
            const radioitems = [
              // radioボタン
              { id: 0, check: false, input: "社員", output: "社員" },
              {
                id: 1,
                check: false,
                input: "アルバイト",
                output: "アルバイト",
              },
              { id: 2, check: false, input: "無職", output: "無職" },
            ];
            return (
              <div>
                {this.state.isSubmitted ? (
                  // 確認画面
                  <div>
                    <h4>下記内容でよろしいでしょうか？</h4>
                    <hr />
                    <ul className="">
                      {confirmform.map((e, i) => {
                        return (
                          <li key={i}>
                            <span className="answer-item">{e.input}：</span>
                            <span className="answer">{e.output}</span>
                          </li>
                        );
                      })}
                    </ul>
                    <div className="submits">
                      <form className="" style={{ marginRight: "10px" }}>
                        <input
                          type="submit"
                          value="修正する"
                          className="submitbtn"
                          onClick={(e) => {
                            this.handleFix(e);
                          }}
                        />
                      </form>
                      <form>
                        <input
                          type="submit"
                          value="送信"
                          className="submitbtn"
                          onClick={(e) => {
                            this.handleSubmit(e);
                          }}
                        />
                      </form>
                    </div>
                  </div>
                ) : (
                  // 元の画面
                  <form
                    onSubmit={(e) => {
                      this.handleConfirm(e);
                    }}
                  >
                    <div className="form">
                      <div className="frontform">
                        {/* お名前 */}
                        <div className="">
                          <label htmlFor="name">お名前（必須）</label>
                          <input
                            type="text"
                            id="name"
                            placeholder="大阪太郎"
                            className="textline"
                            autoComplete="off"
                            value={this.state.name}
                            onChange={(e) => {
                              this.handleName(e);
                            }}
                          />
                          {NameError}
                        </div>
                        {/* 年齢 */}
                        <div className="age">
                          <label htmlFor="age">年齢（任意）</label>
                          <select
                            name="age"
                            id="age"
                            className="textline"
                            value={this.state.age}
                            onChange={(e) => {
                              this.handleAge(e);
                            }}
                          >
                            {ageitems.map((ee, i) => {
                              return (
                                <option key={i} value={ee.output}>
                                  {ee.input}
                                </option>
                              );
                            })}
                          </select>
                          {AgeError}
                        </div>
                        {/* ラジオボタン */}
                        <fieldset className="radio">
                          <legend className="my-radio">職業（任意）</legend>
                          {radioitems.map((item, i) => {
                            return (
                              <label key={i} className="">
                                <input
                                  type="radio"
                                  name="abcde"
                                  value={item.output}
                                  onChange={() => {
                                    this.handleRadio(item);
                                  }}
                                />
                                {item.input}
                                <span>{/* 重なる円 */}</span>
                              </label>
                            );
                          })}
                        </fieldset>
                        {RadioError}
                      </div>
                      {/* お問い合わせ内容 */}
                      <div className="backform">
                        <label htmlFor="content" className="content">
                          お問い合わせ内容（必須）
                        </label>
                        <textarea
                          className="textline"
                          id="content"
                          cols="36"
                          rows="10"
                          maxLength="500"
                          placeholder="（希望事項）"
                          value={this.state.content}
                          onChange={(e) => {
                            this.handleContent(e);
                          }}
                        />
                        {ContentError}
                      </div>
                    </div>
                    <div id="sub">
                      <input
                        type="submit"
                        value="確認画面へ"
                        className="submitbtn"
                      />
                    </div>
                  </form>
                )}
              </div>
            );
          }
        }
        ReactDOM.render(<ContactForm />, document.getElementById("root0"));
      })();
    </script>
  </body>
</html>
